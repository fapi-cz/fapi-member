"use strict";
/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunkapp"] = self["webpackChunkapp"] || []).push([["src_Components_Content_Levels_Levels_LevelsContent_Emails_js"],{

/***/ "./src/Clients/EmailClient.js":
/*!************************************!*\
  !*** ./src/Clients/EmailClient.js ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ EmailClient)\n/* harmony export */ });\n/* harmony import */ var _Client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Client */ \"./src/Clients/Client.js\");\n/* harmony import */ var Enums_RequestMethodType__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! Enums/RequestMethodType */ \"./src/Enums/RequestMethodType.js\");\n/* harmony import */ var Services_AlertService__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! Services/AlertService */ \"./src/Services/AlertService.js\");\n/* harmony import */ var Enums_EmailType__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! Enums/EmailType */ \"./src/Enums/EmailType.js\");\n\n\n\n\nclass EmailClient extends _Client__WEBPACK_IMPORTED_MODULE_0__[\"default\"] {\n  constructor() {\n    super('emails');\n  }\n  async getForLevel(levelId) {\n    return await this.sendRequest('getForLevel', Enums_RequestMethodType__WEBPACK_IMPORTED_MODULE_1__.RequestMethodType.POST, {\n      level_id: levelId\n    });\n  }\n  async updateForLevel(levelId) {\n    let afterRegistration = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n    let afterMembershipProlonged = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n    let afterAdding = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : null;\n    const emailsData = {\n      [Enums_EmailType__WEBPACK_IMPORTED_MODULE_3__.EmailType.AFTER_REGISTRATION]: {\n        subject: afterRegistration === null || afterRegistration === void 0 ? void 0 : afterRegistration.subject,\n        body: afterRegistration === null || afterRegistration === void 0 ? void 0 : afterRegistration.body\n      },\n      [Enums_EmailType__WEBPACK_IMPORTED_MODULE_3__.EmailType.AFTER_MEMBERSHIP_PROLONGED]: {\n        subject: afterMembershipProlonged === null || afterMembershipProlonged === void 0 ? void 0 : afterMembershipProlonged.subject,\n        body: afterMembershipProlonged === null || afterMembershipProlonged === void 0 ? void 0 : afterMembershipProlonged.body\n      },\n      [Enums_EmailType__WEBPACK_IMPORTED_MODULE_3__.EmailType.AFTER_ADDING]: {\n        subject: afterAdding === null || afterAdding === void 0 ? void 0 : afterAdding.subject,\n        body: afterAdding === null || afterAdding === void 0 ? void 0 : afterAdding.body\n      }\n    };\n    return await this.sendRequest('updateForLevel', Enums_RequestMethodType__WEBPACK_IMPORTED_MODULE_1__.RequestMethodType.POST, {\n      level_id: levelId,\n      emails: emailsData\n    });\n  }\n}\n\n//# sourceURL=webpack://app/./src/Clients/EmailClient.js?");

/***/ }),

/***/ "./src/Components/Content/Levels/Levels/LevelsContent/EmailContainer.js":
/*!******************************************************************************!*\
  !*** ./src/Components/Content/Levels/Levels/LevelsContent/EmailContainer.js ***!
  \******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var Images_up_svg__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! Images/up.svg */ \"./src/Media/Images/up.svg\");\n/* harmony import */ var Images_down_svg__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! Images/down.svg */ \"./src/Media/Images/down.svg\");\n\n\n\nfunction EmailContainer(_ref) {\n  let {\n    type,\n    title,\n    subject,\n    body,\n    isOpened,\n    setIsOpened\n  } = _ref;\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", {\n    className: \"email-container\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", {\n    className: \"email-title\",\n    onClick: () => {\n      setIsOpened(!isOpened);\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"span\", null, title), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"img\", {\n    src: isOpened ? Images_up_svg__WEBPACK_IMPORTED_MODULE_1__[\"default\"] : Images_down_svg__WEBPACK_IMPORTED_MODULE_2__[\"default\"]\n  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", {\n    hidden: !isOpened\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", {\n    className: \"vertical-divider\"\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"label\", null, \"P\\u0159edm\\u011Bt e-mailu\"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"input\", {\n    className: \"email-subject-input fm-input\",\n    name: 'email-subject-' + type,\n    id: 'email-subject-' + type,\n    type: \"text\",\n    defaultValue: subject\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"label\", null, \"Obsah e-mailu\"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"textarea\", {\n    className: \"email-content-input fm-input\",\n    name: 'email-body-' + type,\n    id: 'email-body-' + type,\n    defaultValue: body\n  })));\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (EmailContainer);\n\n//# sourceURL=webpack://app/./src/Components/Content/Levels/Levels/LevelsContent/EmailContainer.js?");

/***/ }),

/***/ "./src/Components/Content/Levels/Levels/LevelsContent/Emails.js":
/*!**********************************************************************!*\
  !*** ./src/Components/Content/Levels/Levels/LevelsContent/Emails.js ***!
  \**********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var Enums_EmailType__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! Enums/EmailType */ \"./src/Enums/EmailType.js\");\n/* harmony import */ var Components_Content_Levels_Levels_LevelsContent_EmailContainer__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! Components/Content/Levels/Levels/LevelsContent/EmailContainer */ \"./src/Components/Content/Levels/Levels/LevelsContent/EmailContainer.js\");\n/* harmony import */ var Clients_EmailClient__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! Clients/EmailClient */ \"./src/Clients/EmailClient.js\");\n/* harmony import */ var Components_Elements_Loading__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! Components/Elements/Loading */ \"./src/Components/Elements/Loading.js\");\n/* harmony import */ var Components_Elements_SubmitButton__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! Components/Elements/SubmitButton */ \"./src/Components/Elements/SubmitButton.js\");\n\n\n\n\n\n\nfunction Emails(_ref) {\n  let {\n    level\n  } = _ref;\n  const [emails, setEmails] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n  const [loadEmails, setLoadEmails] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(true);\n  const emailTypes = [Enums_EmailType__WEBPACK_IMPORTED_MODULE_1__.EmailType.AFTER_REGISTRATION, Enums_EmailType__WEBPACK_IMPORTED_MODULE_1__.EmailType.AFTER_MEMBERSHIP_PROLONGED, Enums_EmailType__WEBPACK_IMPORTED_MODULE_1__.EmailType.AFTER_ADDING];\n  const containersOpened = emailTypes.reduce((acc, type) => {\n    const [isOpened, setIsOpened] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n    acc[type] = [isOpened, setIsOpened];\n    return acc;\n  }, {});\n  const emailClient = new Clients_EmailClient__WEBPACK_IMPORTED_MODULE_3__[\"default\"]();\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    setEmails(null);\n    setLoadEmails(true);\n  }, [level.id]);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    const reloadEmails = async () => {\n      await emailClient.getForLevel(level.id).then(data => {\n        setEmails(data);\n      });\n      setLoadEmails(false);\n    };\n    if (loadEmails === true) {\n      reloadEmails();\n    }\n  }, [loadEmails]);\n  var isSection = level.parentId === null;\n  var emailTitles = {\n    [Enums_EmailType__WEBPACK_IMPORTED_MODULE_1__.EmailType.AFTER_REGISTRATION]: 'E-mail po registraci do ' + (isSection ? 'sekce' : 'úrovně'),\n    [Enums_EmailType__WEBPACK_IMPORTED_MODULE_1__.EmailType.AFTER_MEMBERSHIP_PROLONGED]: 'E-mail po prodloužení členství v ' + (isSection ? 'sekci' : 'úrovni'),\n    [Enums_EmailType__WEBPACK_IMPORTED_MODULE_1__.EmailType.AFTER_ADDING]: 'E-mail po přidání do ' + (isSection ? 'sekce' : 'úrovně')\n  };\n  const handleSaveEmails = async event => {\n    event.preventDefault();\n    const form = event.target;\n    const afterRegistration = getEmailDataFromInput(Enums_EmailType__WEBPACK_IMPORTED_MODULE_1__.EmailType.AFTER_REGISTRATION, form);\n    const afterMembershipProlonged = getEmailDataFromInput(Enums_EmailType__WEBPACK_IMPORTED_MODULE_1__.EmailType.AFTER_MEMBERSHIP_PROLONGED, form);\n    const afterAdding = getEmailDataFromInput(Enums_EmailType__WEBPACK_IMPORTED_MODULE_1__.EmailType.AFTER_ADDING, form);\n    await emailClient.updateForLevel(level.id, afterRegistration, afterMembershipProlonged, afterAdding);\n    setLoadEmails(true);\n  };\n  const getEmailDataFromInput = (type, form) => {\n    var subject = form.querySelector('#email-subject-' + type).value;\n    var body = form.querySelector('#email-body-' + type).value;\n    return {\n      subject: subject,\n      body: body\n    };\n  };\n  if (emails === null) {\n    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(Components_Elements_Loading__WEBPACK_IMPORTED_MODULE_4__[\"default\"], {\n      height: '346px'\n    });\n  }\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"form\", {\n    className: \"levels-content levels-emails\",\n    onSubmit: handleSaveEmails\n  }, Object.entries(emailTitles).map(_ref2 => {\n    let [type, title] = _ref2;\n    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(Components_Content_Levels_Levels_LevelsContent_EmailContainer__WEBPACK_IMPORTED_MODULE_2__[\"default\"], {\n      key: type,\n      type: type,\n      title: title,\n      subject: emails[type].s,\n      body: emails[type].b,\n      isOpened: containersOpened[type][0],\n      setIsOpened: containersOpened[type][1]\n    });\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(Components_Elements_SubmitButton__WEBPACK_IMPORTED_MODULE_5__[\"default\"], {\n    text: 'Uložit',\n    show: !loadEmails,\n    centered: true,\n    big: true\n  }));\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Emails);\n\n//# sourceURL=webpack://app/./src/Components/Content/Levels/Levels/LevelsContent/Emails.js?");

/***/ }),

/***/ "./src/Enums/EmailType.js":
/*!********************************!*\
  !*** ./src/Enums/EmailType.js ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   EmailType: () => (/* binding */ EmailType)\n/* harmony export */ });\nconst EmailType = Object.freeze({\n  AFTER_REGISTRATION: 'afterRegistration',\n  AFTER_MEMBERSHIP_PROLONGED: 'afterMembershipProlonged',\n  AFTER_ADDING: 'afterAdding'\n});\n\n//# sourceURL=webpack://app/./src/Enums/EmailType.js?");

/***/ })

}]);