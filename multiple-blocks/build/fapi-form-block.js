!function(){"use strict";var e={n:function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,{a:r}),r},d:function(t,r){for(var o in r)e.o(r,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:r[o]})},o:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}},t=window.wp.blocks;function r(){return r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},r.apply(this,arguments)}var o=window.wp.element,n=window.wp.i18n,a=window.wp.components,i=window.wp.blockEditor,l=window.wp.apiFetch,s=e.n(l);const{useState:p,useEffect:c}=wp.element;let f=[],m=[];const u="undefined"==typeof AbortController?void 0:new AbortController;var b=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":2,"name":"fapi-member/fapi-form-block","title":"FAPI form","category":"fapi","version":"0.1.1","description":"FAPI form widget.","icon":"cart","supports":{"html":false},"keywords":["fapi","form"],"attributes":{"path":{"type":"string","source":"attribute","selector":"script","attribute":"path"}},"textdomain":"fapi-member","editorScript":"file:../../../../build/fapi-form-block.js","editorStyle":"file:../../../../build/fapi-form-block.css","style":"file:../../../../build/fapi-form-block.css"}');const{name:d,...h}=b;(0,t.registerBlockType)(d,{...h,edit:function(e){let{attributes:t,setAttributes:l}=e;t.path||l({path:""});const[b,d]=p(t.path),[h,v]=p("all"),[w,y]=p(!1),_=(0,i.useBlockProps)(),g=f.find((e=>""!==t.path&&e.value===t.path));return c((()=>{s()({path:"/?rest_route=/fapi/v1/list-forms/"+encodeURIComponent(h),signal:u?.signal}).then((e=>{f=e,f.unshift({label:(0,n.__)("-- vyberte prodejní formulář --","fapi-member"),value:""}),y(!0)})).catch((e=>{f=[],console.error(e),"AbortError"===e.name&&console.error("Request has been aborted")}))}),[h]),c((()=>{s()({path:"/?rest_route=/fapi/v1/list-users"}).then((e=>{m=JSON.parse(e),m.unshift({label:(0,n.__)("(všechny propojené účty)","fapi-member"),value:"all"})})).catch((e=>{m=[],console.error(e),"AbortError"===e.name&&console.error("Request has been aborted")}))})),w?(0,o.createElement)("div",r({},_,{style:{"text-align":"center"}}),(0,o.createElement)(i.InspectorControls,{key:"setting"},(0,o.createElement)("div",{id:"fapi-form-controls"},(0,o.createElement)(a.SelectControl,{label:(0,n.__)("Vyberte účet FAPI","fapi-member"),value:h,options:m,onChange:e=>{y(!1),v(e)}}),(0,o.createElement)(a.SelectControl,{label:(0,n.__)("Vyberte prodejní formulář","fapi-member"),value:b,options:f,onChange:e=>{d(e),l({path:e,newPath:e})}}))),w,g?sprintf((0,n.__)('<<< Zde bude prodejní formulář "%s" >>>',"fapi-member"),g.label):(0,n.__)("<<< Vyberte prodejní formulář z bočního menu >>>","fapi-member")):(0,o.createElement)("div",r({},_,{style:{"text-align":"center"}}),(0,o.createElement)(i.InspectorControls,{key:"setting"},(0,o.createElement)("div",{id:"fapi-form-controls"},(0,o.createElement)(a.SelectControl,{label:(0,n.__)("Vyberte účet FAPI","fapi-member"),value:h,options:m}),(0,o.createElement)(a.SelectControl,{label:(0,n.__)("Vyberte prodejní formulář","fapi-member"),value:b,options:f,disabled:!0}))),(0,n.__)("Načítání dat, počkejte prosím...","fapi-member"))},save:function(e){const t=i.useBlockProps.save();return(0,o.createElement)("script",r({type:"text/javascript",src:"https://form.fapi.cz/script.php?id="+e.attributes.path},t,{path:e.attributes.path}))}})}();